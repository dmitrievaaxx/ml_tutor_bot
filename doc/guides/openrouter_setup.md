# Инструкция по получению API ключа OpenRouter

OpenRouter предоставляет единый API для доступа к различным языковым моделям, включая бесплатные модели.

## Шаг 1: Регистрация на OpenRouter

1. Перейдите на сайт [OpenRouter](https://openrouter.ai/)
2. Нажмите кнопку **"Sign In"** в правом верхнем углу
3. Войдите через Google, GitHub или Discord

## Шаг 2: Получение API ключа

1. После входа откройте страницу [Keys](https://openrouter.ai/keys)
2. Нажмите кнопку **"Create Key"**
3. Введите название ключа (например, "ML Tutor Bot")
4. Нажмите **"Create"**
5. Скопируйте созданный API ключ

**⚠️ ВАЖНО:** 
- Сохраните ключ в безопасном месте
- Ключ показывается только один раз
- Не публикуйте его в открытом доступе

## Шаг 3: Добавление бесплатных кредитов (опционально)

OpenRouter предоставляет бесплатные кредиты для тестирования:

1. Перейдите на страницу [Credits](https://openrouter.ai/credits)
2. Используйте промо-код для получения бесплатных кредитов (если доступен)
3. Для бесплатных моделей кредиты не требуются!

## Шаг 4: Добавление ключа в проект

1. Откройте файл `.env` в корне проекта
2. Добавьте строку:
```bash
OPENROUTER_API_KEY=ваш_ключ_здесь
```

3. Сохраните файл

## Бесплатные модели для использования в РФ без VPN

Следующие модели **бесплатны** и работают в РФ без VPN:

### Рекомендуемые модели:

1. **Qwen 2 7B** (рекомендуется, хорошо работает с русским языком)
   ```
   LLM_MODEL=qwen/qwen-2-7b-instruct:free
   ```

2. **Llama 3.2 3B**
   ```
   LLM_MODEL=meta-llama/llama-3.2-3b-instruct:free
   ```

3. **Phi-3 Mini**
   ```
   LLM_MODEL=microsoft/phi-3-mini-128k-instruct:free
   ```

4. **Google Gemma 2 9B**
   ```
   LLM_MODEL=google/gemma-2-9b-it:free
   ```

### Как изменить модель:

Откройте файл `.env` и измените значение `LLM_MODEL`:

```bash
# Пример конфигурации
LLM_MODEL=qwen/qwen-2-7b-instruct:free
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=500
```

## Проверка работы

После настройки:

1. Запустите бота: `python -m bot.main`
2. Отправьте сообщение боту в Telegram
3. Бот должен ответить используя LLM

## Устранение проблем

### Ошибка "Invalid API Key"
- Проверьте, что ключ скопирован полностью
- Убедитесь, что нет пробелов в начале/конце ключа
- Создайте новый ключ на OpenRouter

### Ошибка "Rate limit exceeded"
- Подождите несколько минут
- Используйте другую бесплатную модель
- Добавьте кредиты на аккаунт

### Модель не отвечает
- Проверьте соединение с интернетом
- Попробуйте другую модель из списка
- Проверьте логи бота для деталей ошибки

## Полезные ссылки

- [OpenRouter Dashboard](https://openrouter.ai/)
- [Список моделей](https://openrouter.ai/models)
- [Документация API](https://openrouter.ai/docs)
- [Бесплатные модели](https://openrouter.ai/models?q=free)

